<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="edu.sustech.dbproject.dao.MessageDao">
    <select id="queryMessages" resultType="edu.sustech.dbproject.entity.Message">
        select * from lanmao.chat;
    </select>
    <select id="queryMessageByID" resultType="edu.sustech.dbproject.entity.Message">
        select * from lanmao.chat
        where chat_id=#{messageID}
    </select>
    <insert id="insertMessage" useGeneratedKeys="true" keyProperty="messageID"
            keyColumn="message_id" parameterType="edu.sustech.dbproject.entity.Message">
        INSERT INTO
        message_tb(send_user_id, recv_user_id, message_time, content)
        VALUES
        (#{sendUserID}, #{recvUserID}, #{messageTime}, #{content})
    </insert>

    <select id="listPictures" resultType="java.lang.String" parameterType="java.lang.Integer">
        select picture_url from lanmao.report_picture where report_id=#{report}
    </select>

    <insert id="addPicture">
        insert into lanmao.report_picture
        values (default,#{report},#{picture})
    </insert>

    <delete id="removePicture">
        delete from lanmao.report_picture where cmt_id=#{report} and pict_url=#{picture}
    </delete>
</mapper>